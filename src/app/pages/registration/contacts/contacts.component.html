<section class="screenContacts">
    <div class="container">
        <div style="user-select: none;">
            <!-- contact form starts here -->
            <div class="row">
                <form action="" [formGroup]="contactForm" class="p-0" *ngIf="role == 'Vendor'">
                    <!-- name & designation -->
                    <div class="row mb-2">
                        <div class="col-sm mb-sm-0 mb-2">
                            <div>
                                <label class="input-label-text"> Name <span class="asterisk-required">*</span> </label>
                                <div class="input-group">
                                    <input nbInput fullWidth fieldSize="small" class="input-border"
                                        placeholder="Enter name" formControlName="Name"
                                        (keypress)="keyPressValidation($event,'text')" />
                                    <mat-error
                                        *ngIf="this.contactForm.get('Name').hasError('required') && this.contactForm.get('Name').touched"
                                        class="error-msg">Name is required 
                                    </mat-error>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm">
                            <div>
                                <label class="input-label-text"> Designation </label>
                                <div class="input-group">
                                    <input nbInput fullWidth fieldSize="small" class="input-border"
                                        placeholder="Enter designation" formControlName="Designation" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- name & designation -->

                    <!-- Phone No & Email Id -->
                    <div class="row mb-2">
                        <div class="col-sm mb-sm-0 mb-2">
                            <div>
                                <label class="input-label-text"> Phone No </label>
                                <div class="input-group">
                                    <input nbInput fullWidth minlength="11" maxlength="11" class="input-border" fieldSize="small"
                                        placeholder="Enter phone number" formControlName="Phone_Number"
                                        (keypress)="keyPressValidation($event,'tel')" />
                                        <mat-error
                                        *ngIf="this.contactForm.get('Phone_Number').hasError('minlength') && this.contactForm.get('Phone_Number').touched"
                                        class="error-msg">Phone No should have minimun 11 characters</mat-error>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm">
                            <div>
                                <label class="input-label-text"> Email Id <span class="asterisk-required">*</span> </label>
                                <div class="input-group">
                                    <input nbInput fullWidth fieldSize="small" class="input-border"
                                        placeholder="Enter email id" formControlName="Email_Id"
                                        (keypress)="keyPressValidation($event,'email')" />
                                    <mat-error
                                        *ngIf="this.contactForm.get('Email_Id').hasError('required') && this.contactForm.get('Email_Id').touched"
                                        class="error-msg">Email Id is required
                                    </mat-error>
                                    <mat-error
                                        *ngIf="this.contactForm.get('Email_Id').hasError('pattern') && this.contactForm.get('Email_Id').touched"
                                        class="error-msg">Invalid Email Id
                                    </mat-error>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Phone No & Email Id -->

                    <!-- Mobile No & contact type & add btn -->
                    <div class="row">
                        <div class="col-md-6 mb-sm-0 mb-2">
                            <div>
                                <label class="input-label-text"> Mobile No <span class="asterisk-required">*</span> </label>
                                <div class="input-group">
                                    <input nbInput fullWidth minlength="10" maxlength="10" class="input-border" fieldSize="small"
                                        placeholder="Enter mobile no" formControlName="Mobile_Number"
                                        (keypress)="keyPressValidation($event,'tel')" />
                                        <mat-error
                                        *ngIf="this.contactForm.get('Mobile_Number').hasError('required') && this.contactForm.get('Mobile_Number').touched"
                                        class="error-msg">Mobile No is required</mat-error>
                                        <mat-error
                                        *ngIf="this.contactForm.get('Mobile_Number').hasError('minlength') && this.contactForm.get('Mobile_Number').touched"
                                        class="error-msg">Mobile No should have minimun 10 characters</mat-error>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 d-flex">
                            <!-- contact type -->
                            <div class="address-type col-8">
                                <label class="input-label-text"> Select Contact type <span class="asterisk-required">*</span> </label>
                                <div class="input-group">
                                    <nb-select fullWidth placeholder="Select contact type" size="small" status="primary"
                                        formControlName="Contact_Type_Id" required>
                                        <nb-option *ngFor="let contact of contactTypes"
                                            [value]="contact.Contact_Type_Id">{{contact.Contact_Type}}</nb-option>
                                    </nb-select>
                                    <mat-error
                                        *ngIf="this.contactForm.get('Contact_Type_Id').hasError('required') && this.contactForm.get('Contact_Type_Id').touched"
                                        class="error-msg">Contact type is required</mat-error>
                                </div>
                            </div>
                            <!-- contact type -->

                            <!-- add btn -->
                            <div class="col-4 d-flex align-items-end justify-content-center">
                                <button class="btn btn-design center-flexBox" (click)="addContact()">
                                    <img src="../../../../assets/images/pngs/plus.png" width="18" height="18"
                                        class="me-1">
                                    Add</button>
                            </div>
                            <!-- add btn -->
                        </div>
                    </div>
                    <!-- Mobile No & contact type & add btn -->
                </form>
            </div>
            <!-- contact form starts here -->

            <!-- table starts here -->
            <div class="row">
                <div class="mt-3 table-responsive w-100 table-container registration-table contact-table p-0">
                    <table mat-table [dataSource]="dataSource">

                        <!-- Contact type column -->
                        <ng-container matColumnDef="contactTypeId">
                            <th mat-header-cell *matHeaderCellDef> Contact Type </th>
                            <td mat-cell *matCellDef="let element">
                                {{getContactTypeById(element.Contact_Type_Id)}}
                            </td>
                        </ng-container>

                        <!-- Name column -->
                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef> Name </th>
                            <td mat-cell *matCellDef="let element"> {{element.Name}} </td>
                        </ng-container>

                        <!-- Designation column -->
                        <ng-container matColumnDef="designation">
                            <th mat-header-cell *matHeaderCellDef> Designation </th>
                            <td mat-cell *matCellDef="let element"> {{element.Designation}} </td>
                        </ng-container>

                        <!-- PhoneNo column -->
                        <ng-container matColumnDef="phoneNo">
                            <th mat-header-cell *matHeaderCellDef class="no-wrap-column"> Phone No </th>
                            <td mat-cell *matCellDef="let element" class="no-wrap-column"> {{element.Phone_Number}}
                            </td>
                        </ng-container>

                        <!-- EmailId column -->
                        <ng-container matColumnDef="emailId">
                            <th mat-header-cell *matHeaderCellDef> Email Id </th>
                            <td mat-cell *matCellDef="let element">{{element.Email_Id}}</td>
                        </ng-container>

                        <!-- Mobile No column -->
                        <ng-container matColumnDef="mobileNo">
                            <th mat-header-cell *matHeaderCellDef class="no-wrap-column"> Mobile No </th>
                            <td mat-cell *matCellDef="let element" class="no-wrap-column">{{element.Mobile_Number}}</td>
                        </ng-container>

                        <!-- action column -->
                        <ng-container matColumnDef="action">
                            <th mat-header-cell *matHeaderCellDef [hidden]="role != 'Vendor'"> </th>
                            <td mat-cell *matCellDef="let element; let i = index" [hidden]="role != 'Vendor'">
                                <div>
                                    <button mat-mini-fab color="basic" class="cancel-btn" (click)="removeContact(i)">
                                        <img src="../../../../assets/images/pngs/xmark.png" height="18" width="18">
                                    </button>
                                </div>
                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumns" class="row-header"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns; let i = index"></tr>

                        <!-- Row shown when there is no matching data that will be provided to the table. -->
                        <tr class="mat-row" *matNoDataRow>
                            <td class="mat-cell" colspan="100%" class="no-data-row">
                                <nb-icon icon="file-text-outline"></nb-icon>
                                This table is empty.
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <!-- table ends here -->
        </div>
    </div>
</section>